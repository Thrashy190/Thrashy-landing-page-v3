---
// components/ImageCarousel.astro
import { Image } from "astro:assets";
import daimler from "../assets/daimler.webp";
import main from "../assets/main.webp";
import softtek from "../assets/softtek.webp";
---

<div
  class="carousel-wrapper relative w-full h-[600px] overflow-hidden rounded-xl"
>
  <div id="carousel-track" class="absolute flex w-max h-full">
    <Image src={daimler} alt="Image 1" class="w-full h-full" />
    <Image src={main} alt="Image 2" class="w-full h-full" />
    <Image src={softtek} alt="Image 3" class="w-full h-full" />
  </div>
</div>

<style>
  .carousel-wrapper {
    max-width: 100%;
  }
  #carousel-track img {
    min-width: 100%;
    transition: transform 0.5s ease-in-out;
  }
</style>

<script>
  import gsap from "gsap";

  document.addEventListener("DOMContentLoaded", () => {
    const track = document.getElementById("carousel-track")!;
    const slides = track.children;
    const slideCount = slides.length;
    let index = 0;

    function autoSlide() {
      index = (index + 1) % slideCount;
      gsap.to(track, {
        x: `-${index * 100}%`,
        duration: 1.2,
        ease: "power2.inOut",
      });
    }

    setInterval(autoSlide, 4000);
  });
</script>
